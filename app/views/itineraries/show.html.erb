<div data-controller = "modal">
<div class="copy-modal-overlay" data-modal-target="modal"  >
  <div class="copy-modal-close-botton" data-action="click->modal#closeModal"><i class="fa-solid fa-xmark fa-2xl" ></i></div>
  <div class="copy-container">
    <%= form_with url: '/itineraries', method: :post, class:"copy-form-container", data:{ controller:"datepicker" } do |f| %>
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <%= hidden_field_tag 'data', @itinerary.id , class:"data-hidden-2"  %>
      <%= f.label :address, "Trip Title" , class:"title-label"%>
      <%= f.text_field :title,placeholder: "Enter trip title", class:"title-input" %>
      <div>
        <%= f.label :date, "Select Date", class:"date-label"%>
        <div class="date-input">
          <i class="fa-regular fa-calendar-days date-icon"></i>
          <%= f.date_field :date, placeholder: "Select Date", data:{ datepicker_target:"datePicker"}, class:"date-form" %>
        </div>
      </div>
      <div class="submit_button">
          <%= f.submit "Copy itinerary", class:"form-submit" %>
      </div>
    <% end %>
  </div>
</div>

<%# data-action="click->modal#openModal" %>

<div class="container mt-5">
  <div class="bannertitle">
    <div class="summary_header" >
      <h1><%= @itinerary.address %></h1>
      <h5><%= @itinerary.title %></h5>
      <div>
        <img src="data:image/png;base64,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" alt="">
        <h6><p>By <%= @itinerary.user.first_name %></p></h6>
      </div>
    </div>
    <div class="summary_img_banner">
      <img
        src="https://images.unsplash.com/photo-1574007557239-acf6863bc375?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80"
        alt="User Trip Photo"
      />
    </div>
  </div>


<div class="show-main-summary-container">
  <div class="show-summary-left">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link2 active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Activities</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link2" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Gallery</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link2" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Reviews</button>
      </li>
    </ul>

    <div class="tab-content" id="myTabContent">
      <%# tab 1 %>
      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <div class="daily_activity_text mb-3">
          <h2><%= @itinerary.user.first_name %>'s Activities</h2>
          <div>
            <h4 class="d-inline">Day : </h4>
            <%= form_with url: "/itineraries/#{@itinerary.id}/summary", method: :post, class:"summary-date-form d-inline" do |f| %>
              <select name="date" class="summary-date">
                    <option value="">--All Days--</option>
                    <%= @dates.each_with_index do |date,i| %>
                      <option class="summary-day" data-date="<%= date %>" value="<%= i + 1 %>" >Day <%=i + 1%> (<%= date%>)</option>
                    <% end %>
                </select>
              <%= f.submit "submit", class:"summary-date-submit d-none" %>
            <% end %>
          </div>
      </div>

    <div class="summary-activity-container-main" data-controller="summarypage">
      <%= render "itineraries/summary_activities", locals: {activities: @activities,dates: @dates, itinerary:@itinerary} %>
    </div>

    </div>

    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
          <div class="album_heading">
        <h2><%= @itinerary.user.first_name %>'s Album</h2>
        <%# <%= link_to "View Gallery", gallery_itinerary_path(@itinerary), class:"btn button-74" %>


      <%# <%= link_to gallery_itinerary_path(@itinerary),  class:"gallery-link" do %>
        <%# <button class="btn btn-74 btn-gallery">View Gallery</button>
      <% end %>
    </div>

    <div class="summary_images_container">
      <div class="summary_gallery-grid">
        <% @reviews.each do |review| %>
          <% unless review.photo.key.nil? %>
            <div class="summary_gallery-card-container">
              <%= cl_image_tag review.photo.key, class:"summary_gallery-image"%>
            </div>
          <% end %>
        <% end %>
        <% @itinerary.photos.each do |photo| %>
          <div class="summary_gallery-card-container">
            <%= cl_image_tag photo.key, class:"summary_gallery-image"%>
          </div>
        <% end %>
      </div>



        <%# <img src="https://assets.codepen.io/12005/dog-balloon.jpg" alt="a hot air balloon shaped like a dog" /> %>
          <%# <button class="add_image_no_border" type="submit"> %>
          <%# <%=  link_to "/itineraries/new" do %>

            <%# <% end %>
        <%# </form> %>

    </div>
  </div>

  <%# tab 3 %>
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
    <div class="summary_body">
      <div class="user_notes">
        <h2><%= @itinerary.user.first_name %>'s trip review</h2>
        <% if @itinerary.review.nil? %>
          <p></p>
        <% else %>
          <p><%= @itinerary.review %></p>
        <% end %>
      </div>
      <div class="recommendation">
        <h2>Recomendation</h2>
        <% if @itinerary.recommend.nil? %>
          <p></p>
        <% else %>
          <p><%= @itinerary.recommend %></p>
        <% end %>
      </div>
      <div class="proscons">
        <h2>Pros and Cons</h2>
        <% if @itinerary.pros.nil? %>
          <p></p>
        <% else %>
          <h6 class="color_pc">Pros:</h6>
          <p>- <%= @itinerary.pros %></p>
        <% end %>
        <% if @itinerary.cons.nil? %>
          <p></p>
        <% else %>
          <h6 class="color_pc">Cons:</h6>
          <p>- <%= @itinerary.cons %></p>
        <% end %>
      </div>
    </div>
  </div>
    </div>
  </div>

  <div class="show-summary-right">
    <div class="phase_buttons show text-right">
      <% if user_signed_in? %>
        <button data-action="click->modal#openModal" class="summary_btn">Copy itinerary</button>
      <% end %>
    </div>

    <div data-controller="showmap" class="show-map" id="show-map"
    data-showmap-activities-value="<%= @activities_coord.to_json %>"
    data-showmap-center-value="<%= @country.to_json %>"
    data-showmap-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>

</div>
